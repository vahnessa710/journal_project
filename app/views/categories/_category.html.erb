<div id="<%= dom_id category %>">
  <div class="category-name-container">
    <h2>
      <%= category.name %>
    </h2>

  
  <%= link_to edit_category_path(@category), id: "edit-category-link", class: "link" do %>
    <span class="material-symbols-outlined">edit_square</span>
  <% end %>

  </div>

  <!-- This div will hold the edit form and be hidden initially -->
  <div id="edit-category-form" class = "hidden">
    <%= render "form", category: @category %>
  </div>

<!-- This div Tasks to Do: -->
  <div class="category-details">
    <h3>Tasks to do:</h3>
    <div class="tasks">
  <% if @tasks.any? %>
    <% @tasks.each do |task| %>
      <div class="task">
        <h3><%= task.name %></h3>
        <p><%= task.description %></p>
        <p>Due Date: <%= task.due_date || "No due date set" %></p>
        <p>Priority: <%= task.priority ? "High" : "Normal" %></p>
        <%# <p>Status: <%= task.completed ? "Completed" : "Incomplete" %>
        <%= link_to 'Edit', edit_category_task_path(@category, task) %> |
        <%= button_to 'Delete', category_task_path(@category, task), method: :delete, data: { confirm: 'Are you sure?' } %>
      </div>
    <% end %>
  <% else %>
    <p>No tasks for "<%= @category.name %>" yet.</p>
  <% end %>
</div>

  </div>
</div>

<script>
 document.addEventListener("DOMContentLoaded", function () {
  const editButton = document.getElementById("edit-category-link");
  const editForm = document.getElementById("edit-category-form");

  if (!editButton || !editForm) {
    console.log("Edit button or form not found");
    return;
  }

  editButton.addEventListener("click", function (event) {
    event.preventDefault();
    editForm.classList.toggle("hidden");
  });
});

</script>


